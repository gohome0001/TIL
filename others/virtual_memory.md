## why kernel process is mapped in each userprocess's virtual memory?

가상 메모리는 물리적 메모리를 한 단계 추상화 시킨, 각 프로세스만의 독립적인 주소 공간이다. 

가상 메모리의 등장은 user process와 커널이 간단하면서도 정돈된, 균일한 환경에서 작동할 수 있게 해 주었다. 

이에 따라, 각 프로세스가 독립된 주소 공간을 사용하게 됨으로, 프로그래머가 직접 물리 메모리 공간에 대해 신경 쓰지 않게 될 수 있었다.

가상 메모리를 사용하기 위해, 가상 메모리 주소를 물리 메모리 주소로 변환할 때 사용되는, 각 프로세스 별로 Page Table이 하나씩 있다.

또한 매번 Page Table을 읽어 오지 않아도 되도록, 이를 caching하는 Translation Lookaside Buffer (TLB)도 있다. 

그런데, 동시에 실행되는 프로세스의 수가 늘어나면 주소 변환에 사용할 page table이 계속 바뀌게 된다. 

이에 따라 TLB에 caching 되는 데이터도 계속 바뀌게 되면서, TLB의 효율이 낮아지게 되었다.

결국 효율을 극대화하기 위해 많은 운영체제들은 가상 메모리 공간을 둘로 나눴다. 

하나는 각 프로세스의 공간으로, 하나는 커널 공간으로 나뉘어졌다. 

커널은 하나이므로, 실행되는 프로세스가 바뀌어도, 커널 공간에 대한 주소 매핑 정보는 유지할 수 있게 되어, TLB의 효율이 향상되는 효과를 얻게 되었다.
